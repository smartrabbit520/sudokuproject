import {
    arrayToSudoku,
    printSudoku,
    NakedPairsSolver,
    XYWingSolver,
    XYZWingSolver,
    //WWingSolver,
    stringToSudoku,
    checkSudokuStatus,
    SimpleSolver,
    NakedQuadsSolver,
    NakedTriplesSolver,
    GridXYSolver,
    cloneSudoku,
    YXWingSolver,
    checkSudokuDifferent,
    MiscellaneousSolver,
    XWingSolver,
    PlaceholderSolver,
    runAllSolversOnce
} from '@sudoku/solver/solver.js';

// 示例数独输入
let sudokuArray0 = [
    [5, 3, 0, 0, 7, 0, 0, 0, 0],
    [6, 0, 0, 1, 9, 5, 0, 0, 0],
    [0, 9, 8, 0, 0, 0, 0, 6, 0],
    [8, 0, 0, 0, 6, 0, 0, 0, 3],
    [4, 0, 0, 8, 0, 3, 0, 0, 1],
    [7, 0, 0, 0, 2, 0, 0, 0, 6],
    [0, 6, 0, 0, 0, 0, 2, 8, 0],
    [0, 0, 0, 4, 1, 9, 0, 0, 5],
    [0, 0, 0, 0, 8, 0, 0, 7, 9]
];

let sudokuArray1 = [
    [6, 0, 0, 0, 0, 0, 0, 0, 8],
    [5, 0, 0, 9, 0, 8, 0, 0, 7],
    [8, 2, 0, 0, 0, 1, 0, 3, 0],
    [3, 4, 0, 2, 0, 9, 0, 8, 0],
    [2, 0, 0, 0, 8, 0, 3, 0, 0],
    [1, 8, 0, 3, 0, 7, 0, 2, 5],
    [7, 5, 0, 4, 0, 0, 0, 9, 2],
    [9, 0, 0, 0, 0, 5, 0, 0, 4],
    [4, 0, 0, 0, 9, 0, 0, 0, 3]
];

let sudokuArray2 = [
    [0, 5, 9, 0, 0, 0, 3, 0, 0],
    [0, 7, 2, 0, 6, 0, 5, 0, 4],
    [0, 0, 0, 8, 0, 0, 0, 0, 2],
    [0, 0, 0, 3, 5, 0, 0, 4, 0],
    [0, 0, 0, 0, 4, 0, 8, 3, 6],
    [0, 0, 0, 0, 1, 0, 0, 0, 0],
    [0, 4, 6, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 4, 0, 8, 9],
    [1, 0, 0, 0, 0, 7, 0, 0, 0]
];

let sudokuArray3 = [
    [9, 8, 4, 0, 3, 1, 0, 7, 2],
    [6, 1, 0, 0, 0, 7, 0, 0, 0],
    [2, 5, 7, 0, 0, 9, 8, 0, 0],
    [3, 0, 0, 0, 6, 0, 0, 1, 0],
    [0, 0, 0, 3, 7, 0, 9, 2, 0],
    [0, 0, 9, 0, 0, 5, 0, 0, 0],
    [0, 3, 0, 0, 0, 6, 0, 0, 0],
    [0, 4, 5, 0, 1, 8, 0, 9, 6],
    [1, 9, 6, 7, 0, 0, 2, 8, 0]
];

let sudokuArray4 = [
    [2, 9, 0, 8, 0, 0, 0, 0, 0],
    [0, 0, 0, 0, 0, 0, 6, 0, 0],
    [7, 0, 0, 0, 9, 0, 3, 2, 0],
    [0, 0, 0, 0, 2, 0, 0, 0, 6],
    [1, 0, 0, 0, 0, 0, 0, 0, 8],
    [0, 0, 3, 5, 0, 0, 2, 1, 0],
    [0, 0, 5, 0, 0, 4, 0, 0, 0],
    [3, 0, 0, 0, 8, 0, 9, 7, 0],
    [0, 0, 0, 0, 0, 0, 0, 0, 1]
];

let sudokuArray5 = [
    [6, 0, 0, 3, 8, 0, 0, 0, 2],
    [0, 0, 3, 0, 0, 0, 0, 4, 9],
    [8, 0, 2, 0, 5, 0, 0, 0, 0],
    [0, 0, 6, 0, 4, 5, 0, 0, 3],
    [1, 0, 0, 0, 7, 0, 0, 0, 4],
    [0, 4, 0, 2, 9, 0, 0, 0, 5],
    [0, 0, 5, 8, 0, 0, 9, 6, 1],
    [0, 0, 0, 0, 3, 0, 0, 0, 0],
    [0, 0, 9, 0, 0, 7, 3, 0, 0]
];

let sudokuArray6 = [
    [0, 0, 6, 0, 4, 0, 0, 0, 8],
    [7, 0, 0, 0, 0, 0, 0, 4, 0],
    [0, 2, 0, 0, 0, 0, 7, 0, 0],
    [0, 9, 0, 0, 0, 0, 5, 0, 0],
    [0, 0, 0, 0, 8, 5, 0, 2, 0],
    [5, 0, 1, 0, 0, 0, 0, 0, 3],
    [3, 0, 0, 0, 0, 4, 1, 0, 0],
    [0, 0, 0, 0, 5, 0, 4, 0, 0],
    [9, 0, 2, 7, 0, 0, 3, 6, 0]
];

let sudokuArray7 = [
    [1, 3, 8, 7, 5, 6, 2, 9, 4],
    [0, 4, 5, 8, 2, 3, 7, 1, 6],
    [7, 2, 6, 9, 1, 4, 5, 3, 8],
    [8, 5, 4, 1, 9, 7, 3, 6, 2],
    [9, 1, 7, 3, 6, 2, 4, 8, 5],
    [3, 0, 2, 5, 4, 8, 9, 7, 1],
    [0, 8, 3, 2, 7, 5, 1, 4, 9],
    [4, 7, 9, 0, 8, 1, 6, 5, 3],
    [5, 6, 1, 4, 3, 9, 8, 2, 7]
];

let sudokuArray8 = [
    [0, 3, 0, 0, 5, 0, 0, 9, 0],
    [0, 0, 0, 0, 0, 0, 0, 1, 0],
    [7, 0, 6, 0, 0, 4, 0, 0, 8],
    [0, 5, 0, 0, 0, 7, 0, 0, 0],
    [9, 1, 0, 0, 0, 0, 4, 8, 5],
    [0, 0, 0, 0, 0, 0, 0, 0, 0],
    [0, 0, 0, 2, 0, 5, 1, 0, 0],
    [4, 0, 0, 0, 0, 0, 6, 0, 0],
    [0, 0, 1, 4, 0, 0, 0, 2, 7]
];

let sudokuArray9 = [
    [5, 0, 0, 0, 0, 0, 3, 2, 8],
    [2, 9, 0, 0, 8, 0, 4, 0, 0],
    [1, 8, 7, 0, 2, 0, 9, 0, 0],
    [4, 0, 0, 0, 5, 0, 8, 0, 0],
    [6, 5, 9, 0, 3, 8, 0, 0, 2],
    [3, 0, 8, 0, 0, 2, 0, 0, 0],
    [8, 0, 0, 3, 9, 6, 0, 0, 0],
    [9, 6, 5, 8, 1, 7, 2, 3, 4],
    [7, 3, 1, 2, 4, 5, 6, 8, 9]
];

let sudokuArrays = [sudokuArray0, sudokuArray1, sudokuArray2, sudokuArray3, sudokuArray4, sudokuArray5, sudokuArray6
    , sudokuArray7, sudokuArray8, sudokuArray9];

let arrayIndex = 6;

let sudoku = arrayToSudoku(sudokuArrays[arrayIndex]);

function runAll(sudoku) {
    // SimpleSolver
    console.log('SimpleSolver Start');

    let otherSudoku = cloneSudoku(sudoku);

    sudoku = new SimpleSolver().solver(sudoku);

    checkSudokuDifferent(sudoku, otherSudoku);

    console.log('SimpleSolver End');

    // NakedPairsSolver

    console.log('NakedPairsSolver Start');

    otherSudoku = cloneSudoku(sudoku);

    sudoku = new NakedPairsSolver().solver(sudoku);

    checkSudokuDifferent(sudoku, otherSudoku);

    console.log('NakedPairsSolver End');

    // NakedTriplesSolver

    console.log('NakedTriplesSolver Start');

    otherSudoku = cloneSudoku(sudoku);

    sudoku = new NakedTriplesSolver().solver(sudoku);

    checkSudokuDifferent(sudoku, otherSudoku);

    console.log('NakedTriplesSolver End');

    // NakedQuadsSolver

    console.log('NakedQuadsSolver Start');

    otherSudoku = cloneSudoku(sudoku);

    sudoku = new NakedQuadsSolver().solver(sudoku);

    checkSudokuDifferent(sudoku, otherSudoku);

    console.log('NakedQuadsSolver End');

    // MiscellaneousSolver

    console.log('MiscellaneousSolver Start');

    otherSudoku = cloneSudoku(sudoku);

    sudoku = new MiscellaneousSolver().solver(sudoku);

    checkSudokuDifferent(sudoku, otherSudoku);

    console.log('MiscellaneousSolver End');

    // XYWingSolver

    console.log('XYWingSolver Start');

    otherSudoku = cloneSudoku(sudoku);

    sudoku = new XYWingSolver().solver(sudoku);

    checkSudokuDifferent(sudoku, otherSudoku);

    console.log('XYWingSolver End');

    // YXWingSolver

    console.log('YXWingSolver Start');

    otherSudoku = cloneSudoku(sudoku);

    sudoku = new YXWingSolver().solver(sudoku);

    checkSudokuDifferent(sudoku, otherSudoku);

    console.log('YXWingSolver End');

    // XYZWingSolver

    console.log('XYZWingSolver Start');

    otherSudoku = cloneSudoku(sudoku);

    sudoku = new XYZWingSolver().solver(sudoku);

    checkSudokuDifferent(sudoku, otherSudoku);

    console.log('XYZWingSolver End');

    // XWingSolver

    console.log('XWingSolver Start');

    otherSudoku = cloneSudoku(sudoku);

    sudoku = new XWingSolver().solver(sudoku);

    checkSudokuDifferent(sudoku, otherSudoku);

    console.log('XWingSolver End');

    // GridXYSolver

    console.log('GridXYSolver Start');

    otherSudoku = cloneSudoku(sudoku);

    sudoku = new GridXYSolver().solver(sudoku);

    checkSudokuDifferent(sudoku, otherSudoku);

    console.log('GridXYSolver End');

    // PlaceholderSolver

    console.log('PlaceholderSolver Start');

    printSudoku(sudoku);

    otherSudoku = cloneSudoku(sudoku);

    sudoku = new PlaceholderSolver().solver(sudoku);

    checkSudokuDifferent(sudoku, otherSudoku);

    console.log('PlaceholderSolver End');

    // WWingSolver

    // console.log('WWingSolver Start');
    //
    // otherSudoku = cloneSudoku(sudoku);
    //
    // sudoku = new WWingSolver().solver(sudoku);
    //
    // checkSudokuDifferent(sudoku, otherSudoku);
    //
    // console.log('WWingSolver End');

    printSudoku(sudoku);

    return sudoku;
}

for (let index = 0; index <= 9; index++) {
    sudoku = arrayToSudoku(sudokuArrays[index]);
    console.log(`数独${index}：`);
    for (let i = 0; i < 20; i++) {
        console.log(`第${i + 1}次迭代`);

        let originalSudoku = cloneSudoku(sudoku);

        let res = runAllSolversOnce(sudoku);

        sudoku = res['sudoku'];

        let changeArray = res['change'];

        // console.log(changeArray)

        if (!checkSudokuDifferent(sudoku, originalSudoku, false)) {
            console.log('数独未发生变化，结束迭代');
            //console.log(`结束迭代，共迭代${i + 1}次`);
            break;
        }

        // console.log('----------------------');
    }

    checkSudokuStatus(sudoku);
    printSudoku(sudoku);
    console.log('----------------------');
}


// printSudoku(sudoku);





